<!DOCTYPE html>
<html>
<head>

<title>A Mobile Computing Project WebApp</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="./css/bootstrap.min.css">
  <script src="jquery-3.4.1.min.js"></script>
  <script src="./js/bootstrap.min.js"></script>

<style type="text/css">


/* .bg0{

background-image: url("./img/bg.jpeg");

} */
  
.myheader{ text-align:center;
           
}

#pageheader{
               text-align:center;
}



.bg-4{
   background-color: #2f2f2f; 
    color: #fff;
 
}
.bg1{
 
 background-image: url("./img/IOTbg1.jpg");

} 



.text-block {
  
  color: white;
  }
  footer .copyright {
  padding: 15px 0;
  background: #333;
  margin-top: 20px;
  font-size: 15px;
}

footer {
  background: #222;
  color: #aaa;
  padding-top: 10px;
}

.h3{

text-align:center;}
  
 .inline{
 
 display:inline;
 }
  


</style>
</head>
<body onload="viewLocationData();viewGateData();viewAlarmData();viewUserLocationData();viewLightData();viewWindowData();viewKidsAlertData();">



<div class="container-fluid bg1">
 
<div class="row">
    <div class="col-lg-1">
    <img id="img3" src="./img/connected.png" width="110">
    </div>
    <div class="col-sm-10 text-center">
    <br>
     <div class="text-block">
     <h2><strong>Mobile Computing Project</strong></h2>
    <h3><strong>Location Based Service<small>smart home Application</small></strong></h3>
  </div>
    
    </div>
    
      <div class="col-lg-1">
    <img id="img3" src="./img/loc.png" width="110">
    </div>
   
    </div>
</div> 

<div class="bg bg0">

	<div class="container">
		<div class="row">
			<div class="mt-2 col-sm-4" align="center"> 
				<div class="shadow-lg p-3 mb-5 bg-white rounded">
						<h3>Dog Location Data</h3>
						<img id="img3" src="./img/dog2gif.gif" width="120" height="125">
						<h6>Distance from Home</h6>
						<p class="inline" id="p1"></p><p class="inline">m</p>

					</div>
					</div>

			<div class="mt-2 col-sm-4" align="center">
				<div class="shadow-lg p-3 mb-5 bg-white rounded">
						<h3>Alarm</h3>
						<img id="img2" width="100" height="110">
						<h6>Status</h6>
						<p id="p2" />
						

					</div>
				</div>
			

			<div class=" mt-2 col-sm-4" align="center">
				<div class="shadow-lg p-3 mb-5 bg-white rounded">
						<h1 class=>Gate</h1>
							<img id="img4" width="100" height="80"> 
							<p></p>
							<h6>Status</h6>

						<p id="p3" />

					</div>

				</div>

			</div>
			
			</div>
		
			
			<div class= "container">
			
		
		<div class="row">

			<div class="col-sm-4"align="center">
				<div class="shadow-lg p-3 mb-5 bg-white rounded">
					<h3 >User Location Data</h3>
						<img id="img3" src="./img/Manwalk1.gif" width="130">
						<h6>Distance from  Home </h6>
						<p class="inline" id="p4"></p><p class="inline">m</p>

					</div>
				
			</div>

			<div class="col-sm-4"align="center">
				<div class="shadow-lg p-3 mb-5 bg-white rounded">
						<h3 >Light</h3>
						 <img id="img1" width="100" height="120">
						 <p></p>
						 <h6>Status</h6>
						<p id="p5" />

					</div>
				</div>
			

			<div class="col-sm-4"align="center">
				<div class="shadow-lg p-3 mb-5 bg-white rounded">
						<h3>Window</h3>
                     <img id="img5" width="110" height="120">
                     <p></p>
                     <h6>Status</h6>
						<p id="p6"></p>
						 
					</div> 
					
					

			</div>
			</div> 
			</div>
			
			<div class="container">
			<div class="row">
			<div class="col-sm-4"align="center">
				<div class="shadow-lg p-3 mb-5 bg-white rounded">
						<h3>Kids Location Data</h3>
                     
                     <p></p>
                     <h6>Status</h6>
						<p id="p7"></p>
						<input id="t1" name="id" type="text">
						<button id="b3" type="button" onclick="setKidsData()">Set Location</button>
						
		<button id="b1" type="button" onclick="StartKidsData()">View</button>
		<button id="b2" type="button" onclick="StopKidsData()">Stop</button>
						 
					</div> 
			
			
			</div>
			
			<div class="col-sm-4"align="center">
				<div class="shadow-lg p-3 mb-5 bg-white rounded">
						<h3>Kids Alert data</h3>
                     
                     <p></p>
                     <h6>Status</h6>
						<p id="p8"></p>
			
			
			</div>
			</div>
	        </div>
	        </div>

		
	
	<footer>
	<div class="container-fluid bg4">
	<div class="row">
	<div class="col-sm-1">
	<img alt="footer" src="./img/FRA2.png" width="120">
	  </div>
	  <div class="col-sm-10">
	<div class="copyright text-center">
    All Right Reserved &copy; 2020 <span><strong>Frankfurt University of Applied Science</strong></span>
   
  </div>
	  </div>
	  
  </div>
  </div>
  </footer>
</body>

<script src="jquery-3.4.1.min.js"></script>

<script>

 function StartKidsData() {
	 viewKidsData();
	
	interval1 = setInterval(viewKidsData,1000);
	
}
	function StopKidsData() {
		clearInterval(interval1);
			
}
	
	/* function StartUserPosData() {
		viewUserLocationData();
		viewLightData();
		viewHeaterData();
		interval4 = setInterval(viewUserLocationData,4000);
		interval5 = setInterval(viewLightData,2000);
		interval6 = setInterval(viewHeaterData,2000);
	}
	
		function StopUserPosData() {
			clearInterval(interval4);
			clearInterval(interval5);
		
	} */ 
	
	function viewKidsData() {
		$(document).ready(function () {
	        $.ajax({
	            type: "GET",
	            url: "http://localhost:8080/getKidsData",
	            contentType: "application/xml",
	            dataType: "xml",
	            success: function (xmlData) {                   
	                console.log(xmlData);                  
	                $("#p7").text($(xmlData).find("KidsData").text());
	            },   
	             /* complete: function(){
	            	setTimeout(viewKidsData,1000); 
	            	
	            }, */
	            error: function (xhr) {
	                alert(xhr.responseText);
	            }
	        });
	    });
	}
	
	function viewKidsAlertData() {
		$(document).ready(function () {
	        $.ajax({
	            type: "GET",
	            url: "http://localhost:8080/getKidsAlert",
	            contentType: "application/xml",
	            dataType: "xml",
	            success: function (xmlData) {                   
	                console.log(xmlData);                  
	                $("#p8").text($(xmlData).find("AlertData").text());
	            },   
	              complete: function(){
	            	setTimeout(viewKidsAlertData,1000); 
	            	
	            }, 
	            error: function (xhr) {
	                alert(xhr.responseText);
	            }
	        });
	    });
	}
	
function viewLocationData() {
	$(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "http://localhost:8080/getLocData",
            contentType: "application/xml",
            dataType: "xml",
            success: function (xmlData) {                   
                console.log(xmlData);                  
                $("#p1").text($(xmlData).find("LocationData").text());
            },   
             complete: function(){
            	setTimeout(viewLocationData,4000);
            	
            }, 
            error: function (xhr) {
                alert(xhr.responseText);
            }
        });
    });
}
	
function viewAlarmData() {
	$(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "http://localhost:8080/getAlarmData",
            contentType: "application/xml",
            dataType: "xml",
            success: function (xmlData) {                   
                console.log(xmlData);    
                $("#p2").text($(xmlData).find("AlarmData").text());
                
                if ($(xmlData).find("AlarmData").text() == "ON") {

					$("#img2").attr('src','./img/Alarmonn.PNG');
				} else if
					($(xmlData).find("AlarmData").text() == "OFF")
				{
					$("#img2").attr('src','./img/Alarmoff.PNG');
				}
            },
            
            complete: function(){
            	setTimeout(viewAlarmData,2000);
            },
            error: function (xhr) {
                alert(xhr.responseText);
            }
        });
    });
}

function viewGateData() {
	$(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "http://localhost:8080/getGateData",
            contentType: "application/xml",
            dataType: "xml",
            success: function (xmlData) {                   
                console.log(xmlData);                  
                $("#p3").text($(xmlData).find("GateData").text());

				if ($(xmlData).find("GateData").text() == "OPEN") {

					$("#img4").attr('src','./img/GateOpen.png');
				} else if
					($(xmlData).find("GateData").text() == "CLOSE")
				{
					$("#img4").attr('src','./img/gateoff.png');
				}
            },
            
            complete: function(){
            	setTimeout(viewGateData,2000);
            },
            
            error: function (xhr) {
                alert(xhr.responseText);
            }
        });
    });
}



function setKidsData() {
	var addData = "<KidsData>" + $("#t1").val() + "</KidsData>";
	$(document).ready(function () {
        $.ajax({
            type: "POST",
            url: "http://localhost:8080/setKidsData",
            contentType: "application/xml",
            dataType: "xml",
            data: addData,
            success: function () {
            	console.log("Success");
                },
                complete: function(){
                	setTimeout(setKidsData,1000);
                },
                
            error: function (xhr) {
                alert(xhr.responseText);
            }
        });
    });
}

function viewUserLocationData() {
	$(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "http://localhost:8080/getUserLocSensorData",
            contentType: "application/xml",
            dataType: "xml",
            success: function (xmlData) {                   
                console.log(xmlData);                  
                $("#p4").text($(xmlData).find("UserLocationData").text());
            },  
            complete: function(){
            	setTimeout(viewUserLocationData,4000);
            	
            },
            error: function (xhr) {
                alert(xhr.responseText);
            }
        });
    });
}
	

	function viewLightData() {
		$(document).ready(function() {
			$.ajax({
				type : "GET",
				url : "http://localhost:8080/getLightData",
				contentType : "application/xml",
				dataType : "xml",
				success : function(xmlData) {
					console.log(xmlData);
					$("#p5").text($(xmlData).find("LightData").text());

					if ($(xmlData).find("LightData").text() == "ON") {

						$("#img1").attr('src','./img/Bulbon.png');
					} else if
						($(xmlData).find("LightData").text() == "OFF")
					{
						$("#img1").attr('src','./img/Bulboffn.png');
					}
				},
				complete: function(){
	            	setTimeout(viewLightData,2000);
				},
				error : function(xhr) {
					alert(xhr.responseText);
				}
			});
		});
	}

	function viewWindowData() {
		$(document).ready(function() {
			$.ajax({
				type : "GET",
				url : "http://localhost:8080/getWindowData",
				contentType : "application/xml",
				dataType : "xml",
				success : function(xmlData) {
					console.log(xmlData);
					$("#p6").text($(xmlData).find("windowData").text());
					if ($(xmlData).find("windowData").text() == "OPEN") {

						$("#img5").attr('src','./img/Won.png');
					} else if
						($(xmlData).find("windowData").text() == "CLOSE")
					{
						$("#img5").attr('src','./img/Woff.png');
					}
				},
				 complete: function(){
		            	setTimeout(viewWindowData,1000);
		            	
		            },
				error : function(xhr) {
					alert(xhr.responseText);
				}
			});
		});
	}
</script>
</html>